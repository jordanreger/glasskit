<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Location and Sensors - GlassKit</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Reviving the Google Glass.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../favicon.png">
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../../about.html">About</a></li><li class="chapter-item expanded affix "><li class="part-title">GlassKit</li><li class="chapter-item expanded "><a href="../../../../getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="../../../../development/index.html"><strong aria-hidden="true">2.</strong> Developing Glassware</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../development/hello-glass.html"><strong aria-hidden="true">2.1.</strong> Hello Glass tutorial</a></li><li class="chapter-item expanded "><a href="../../../../development/gdk/index.html"><strong aria-hidden="true">2.2.</strong> Glass Development Kit</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../glassware/index.html"><strong aria-hidden="true">3.</strong> Downloading Glassware</a></li><li class="chapter-item expanded affix "><li class="part-title">Official GDK Guides</li><li class="chapter-item expanded "><a href="../../../../archive/index.html"><strong aria-hidden="true">4.</strong> About the Archive</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/index.html"><strong aria-hidden="true">5.</strong> Home</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/design/index.html"><strong aria-hidden="true">6.</strong> Design</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/design/principles.html"><strong aria-hidden="true">6.1.</strong> Principles</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/design/ui.html"><strong aria-hidden="true">6.2.</strong> User Interface</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/design/patterns.html"><strong aria-hidden="true">6.3.</strong> Patterns</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/design/style.html"><strong aria-hidden="true">6.4.</strong> Style</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/patterns/index.html"><strong aria-hidden="true">7.</strong> Development Patterns</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/patterns/ongoing-task.html"><strong aria-hidden="true">7.1.</strong> Ongoing Task</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/patterns/immersion.html"><strong aria-hidden="true">7.2.</strong> Immersion</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/index.html"><strong aria-hidden="true">8.</strong> Get Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/quick-start.html"><strong aria-hidden="true">8.1.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/starting-glassware.html"><strong aria-hidden="true">8.2.</strong> Starting Glassware</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/permissions.html"><strong aria-hidden="true">8.3.</strong> System Permissions</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/authentication.html"><strong aria-hidden="true">8.4.</strong> Authentication</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/index.html"><strong aria-hidden="true">9.</strong> User Interface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/notification-sync.html"><strong aria-hidden="true">9.1.</strong> Notification Sync</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/live-cards.html"><strong aria-hidden="true">9.2.</strong> Live Cards</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/immersions.html"><strong aria-hidden="true">9.3.</strong> Immersions</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/card-design.html"><strong aria-hidden="true">9.4.</strong> Card Design</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/card-scroller.html"><strong aria-hidden="true">9.5.</strong> Card Scroller</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/slider.html"><strong aria-hidden="true">9.6.</strong> Slider</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/index.html"><strong aria-hidden="true">10.</strong> Inputs and Sensors</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/voice.html"><strong aria-hidden="true">10.1.</strong> Voice Input</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/touch.html"><strong aria-hidden="true">10.2.</strong> Touch Gestures</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/location-sensors.html" class="active"><strong aria-hidden="true">10.3.</strong> Location and Sensors</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/camera.html"><strong aria-hidden="true">10.4.</strong> Camera</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/index.html"><strong aria-hidden="true">11.</strong> Distribution</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/checklist.html"><strong aria-hidden="true">11.1.</strong> Glassware Checklist</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/update.html"><strong aria-hidden="true">11.2.</strong> Glassware Update</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/voice-checklist.html"><strong aria-hidden="true">11.3.</strong> Voice Command Checklist</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/branding-guidelines.html"><strong aria-hidden="true">11.4.</strong> Branding Guidelines</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/best-practices.html"><strong aria-hidden="true">11.5.</strong> Best Practices</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/distribute/glass-enterprise.html"><strong aria-hidden="true">11.6.</strong> Glass Enterprise Edition</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Official GDK Reference</li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/index.html"><strong aria-hidden="true">12.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/package-summary.html"><strong aria-hidden="true">13.</strong> glass.app</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/package-summary.html"><strong aria-hidden="true">13.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/ContextualMenus.html"><strong aria-hidden="true">13.2.</strong> ContextualMenus</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/ContextualMenus.html"><strong aria-hidden="true">13.2.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/ContextualMenus.Command.html"><strong aria-hidden="true">13.2.2.</strong> Command</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/VoiceTriggers.html"><strong aria-hidden="true">13.3.</strong> VoiceTriggers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/VoiceTriggers.html"><strong aria-hidden="true">13.3.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/app/VoiceTriggers.Command.html"><strong aria-hidden="true">13.3.2.</strong> Command</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/content/package-summary.html"><strong aria-hidden="true">14.</strong> glass.content</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/contents/package-summary.html"><strong aria-hidden="true">14.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/content/Intents.html"><strong aria-hidden="true">14.2.</strong> Intents</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/media/package-summary.html"><strong aria-hidden="true">15.</strong> glass.media</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/media/package-summary.html"><strong aria-hidden="true">15.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/media/Sounds.html"><strong aria-hidden="true">15.2.</strong> Sounds</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/package-summary.html"><strong aria-hidden="true">16.</strong> glass.touchpad</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/package-summary.html"><strong aria-hidden="true">16.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/Gesture.html"><strong aria-hidden="true">16.2.</strong> Gesture</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.html"><strong aria-hidden="true">16.3.</strong> GestureDetector</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.html"><strong aria-hidden="true">16.3.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.BaseListener.html"><strong aria-hidden="true">16.3.2.</strong> BaseListener</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.FingerListener.html"><strong aria-hidden="true">16.3.3.</strong> FingerListener</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.OneFingerScrollListener.html"><strong aria-hidden="true">16.3.4.</strong> OneFingerScrollListener</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.ScrollListener.html"><strong aria-hidden="true">16.3.5.</strong> ScrollListener</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/touchpad/GestureDetector.TwoFingerScrollListener.html"><strong aria-hidden="true">16.3.6.</strong> TwoFingerScrollListener</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/view/package-summary.html"><strong aria-hidden="true">17.</strong> glass.view</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/view/package-summary.html"><strong aria-hidden="true">17.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/view/MenuUtils.html"><strong aria-hidden="true">17.2.</strong> MenuUtils</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/view/WindowUtils.html"><strong aria-hidden="true">17.3.</strong> WindowUtils</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/widget/package-summary.html"><strong aria-hidden="true">18.</strong> glass.widget</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/widget/package-summary.html"><strong aria-hidden="true">18.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/widget/CardBuilder.html"><strong aria-hidden="true">18.2.</strong> CardBuilder</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/widget/CardBuilder.html"><strong aria-hidden="true">18.2.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/widget/CardBuilder.Layout.html"><strong aria-hidden="true">18.2.2.</strong> Layout</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../archive/glass/develop/gdk/reference/com/google/android/glass/widget/CardScrollAdapter.html"><strong aria-hidden="true">18.3.</strong> CardScrollAdapter</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GlassKit</h1>

                    <div class="right-buttons">
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/GlassKit/website" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/GlassKit/website/edit/main/src/archive/glass/develop/gdk/location-sensors.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="locations-and-sensors"><a class="header" href="#locations-and-sensors">Locations and Sensors</a></h1>
<p>You access location and sensor data using the standard Android platform APIs.## Location</p>
<p>Location on Glass involves using the standard Android platform APIs to get location data from available location providers.</p>
<p>You'll use the following Android SDK classes to get location data:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/location/LocationManager.html"><code>LocationManager</code></a> – Provides access to the Android location system service that handles communication with a <a href="http://developer.android.com/reference/android/location/LocationProvider.html"><code>LocationProvider</code></a>.</li>
<li><a href="http://developer.android.com/reference/android/location/LocationProvider.html"><code>LocationProvider</code></a> – Provides location data based on some criteria. Glass provides special &quot;remote&quot; providers that let you obtain location data from a paired device that has the MyGlass companion app installed.</li>
<li><a href="http://developer.android.com/reference/android/location/Criteria.html"><code>Criteria</code></a> – Lets you create a set of criteria that selects the best <a href="http://developer.android.com/reference/android/location/LocationProvider.html"><code>LocationProvider</code></a> based on the criteria that you set.</li>
</ul>
<h3 id="overview"><a class="header" href="#overview">Overview</a></h3>
<p>To obtain location data, you'll need to use the <a href="http://developer.android.com/reference/android/location/LocationManager.html"><code>LocationManager</code></a> class to get data from one or more location providers.</p>
<p>Applications on an Android phone or tablet retrieve location data from local GPS and network location providers on the device. On Glass, however, the set of available location providers is dynamic and may include <em>remote</em> location providers that supply location data from another source, such as a Bluetooth-paired device with the MyGlass companion app installed. To handle these additional providers, listen for location updates from <em>multiple providers</em> rather than a single provider.</p>
<blockquote>
<p><strong>Warning</strong>: Do not use the <a href="http://developer.android.com/reference/android/location/LocationManager.html#getBestProvider(android.location.Criteria,%20boolean)"><code>LocationManager.getBestProvider()</code></a> method or the constants <a href="http://developer.android.com/reference/android/location/LocationManager.html#GPS_PROVIDER"><code>GPS_PROVIDER</code></a> or <a href="http://developer.android.com/reference/android/location/LocationManager.html#NETWORK_PROVIDER"><code>NETWORK_PROVIDER</code></a> to listen for location updates. Glass uses a dynamic set of providers and listening only to a single provider may cause your application to miss location updates.</p>
</blockquote>
<p>To request data from all available location providers:</p>
<ol>
<li>Create a <a href="http://developer.android.com/reference/android/location/Criteria.html"><code>Criteria</code></a> object with your location requirements.</li>
<li>Call <a href="http://developer.android.com/reference/android/location/LocationManager.html#getProviders(android.location.Criteria,%20boolean)"><code>getProviders()</code></a> to retrieve the list of enabled providers that satisfy your criteria.</li>
<li>Iterate over the list of providers and request updates from all of them. This ensures that you receive updates from the remote providers if they are available but also from the local providers on Glass (such as a wireless network provider).</li>
<li>Use the accuracy and timing information provided with each update to determine whether the update is good enough or if you should wait for another one.</li>
</ol>
<pre><code class="language-java">LocationManager locationManager; // initialized elsewhere

// This example requests fine accuracy and requires altitude, but
// these criteria could be whatever you want.
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setAltitudeRequired(true);

List&lt;String&gt; providers = locationManager.getProviders(
        criteria, true /* enabledOnly */);

for (String provider : providers) {
    locationManager.requestLocationUpdates(provider, minTime,
            minDistance, listener);
}
</code></pre>
<h2 id="sensors"><a class="header" href="#sensors">Sensors</a></h2>
<h3 id="glass"><a class="header" href="#glass">Glass</a></h3>
<p>Glass has a specialized sensor to detect whether or not the device is on the users' head. When enabled, this setting helps conserve battery when the device is not in use. You can use this feature in your Glassware to disable or throttle background services. Start by implementing a <a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html"><code>BroadcastReceiver</code></a> to detect <a href="https://developers.google.com/glass/develop/gdk/reference/com/google/android/glass/content/Intents#ACTION_ON_HEAD_STATE_CHANGED"><code>ACTION_ON_HEAD_STATE_CHANGE</code></a> [<strong>TODO</strong>: ADD LINK] events.</p>
<blockquote>
<p><strong>Note</strong>: Your app can not detect on-head detection events if the user disables the feature in the settings.</p>
</blockquote>
<p>The following example delays and disables game score updates based on whether the user has removed Glass from their head:</p>
<ol>
<li>Implement a <a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html"><code>BroadcastReceiver</code></a> to handle the state change.</li>
<li>In your service, implement the <a href="https://developer.android.com/reference/android/app/Service.html#onCreate()"><code>onCreate()</code></a> method and register a receiver that listens for the <a href="https://developers.google.com/glass/develop/gdk/reference/com/google/android/glass/content/Intents#ACTION_ON_HEAD_STATE_CHANGED"><code>ACTION_ON_HEAD_STATE_CHANGE</code></a> [<strong>TODO</strong>: ADD LINK] intent.</li>
<li>In the <a href="https://developer.android.com/reference/android/app/Service.html#onDestroy()"><code>onDestroy()</code></a> method, unregister the receiver.</li>
</ol>
<pre><code class="language-java">import com.google.android.glass.content.Intents;
...

public class LiveCardService extends Service {

    ...
    private boolean mIsStopped = false;

    private final BroadcastReceiver broadCastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

            if (Intents.ACTION_ON_HEAD_STATE_CHANGED.equals(intent.getAction())) {
                boolean onHead = intent.getBooleanExtra(Intents.EXTRA_IS_ON_HEAD,
                        false);
                if (onHead) {
                    mDelay = LiveCardService.DELAY_MILLIS;
                    if (isStopped()) {
                        // Resume updating scores
                        setStop(false);

                        // Restart immediately to get a refreshed score
                        mHandler.postDelayed(mUpdateLiveCardRunnable, 0);
                    }
                } else {
                    // Increase the delay when the device is off head
                    mDelay = LiveCardService.DELAY_MILLIS_EXT;
                }
            }
        }
    };

    private final Runnable mUpdateLiveCardRunnable = new Runnable() {

        @Override
        public void run() {

            if (mDelay == DELAY_MILLIS_EXT) {
                // Count the increased delay as a retry attempt
                mRetryCount++;
            } else if (mDelay == DELAY_MILLIS) {
                mRetryCount = 0;
            }

            if (mRetryCount &gt; MAX_RETRIES) {
                // Stop updating scores
                mIsStopped = true;
            }

            if (!isStopped()) {
                // Generate fake points.
                homeScore += mPointsGenerator.nextInt(3);
                awayScore += mPointsGenerator.nextInt(3);

                // Update the remote view with the new scores.
                mLiveCardView = getRemoteViews(homeScore, awayScore);

                // Always call setViews() to update the live card's RemoteViews.
                mLiveCard.setViews(mLiveCardView);

                // Queue another score update in 30 seconds.
                mHandler.postDelayed(mUpdateLiveCardRunnable, mDelay);
            }
        }
    };

    @Override
    public void onCreate() {
        super.onCreate();
        mPointsGenerator = new Random();
        mDelay = DELAY_MILLIS;

        registerReceiver(broadCastReceiver, new IntentFilter(
                Intents.ACTION_ON_HEAD_STATE_CHANGED));
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        if (mLiveCard == null) {

            // Get an instance of a live card
            mLiveCard = new LiveCard(this, LIVE_CARD_TAG);

            // Inflate a layout into a remote view
            mLiveCardView = new RemoteViews(getPackageName(),
                    R.layout.live_card);

            // Set up initial RemoteViews values
            homeScore = 0;
            awayScore = 0;
            mLiveCardView = getRemoteViews(homeScore, awayScore);

            // Set up the live card's action with a pending intent
            // to show a menu when tapped
            Intent menuIntent = new Intent(this, LiveCardMenuActivity.class);
            menuIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                    Intent.FLAG_ACTIVITY_CLEAR_TASK);
            mLiveCard.setAction(PendingIntent.getActivity(
                    this, 0, menuIntent, 0));

            // Publish the live card
            mLiveCard.publish(PublishMode.REVEAL);

            // Queue the update text runnable
            mHandler.post(mUpdateLiveCardRunnable);
        }

        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        if (mLiveCard != null &amp;&amp; mLiveCard.isPublished()) {
            //Stop the handler from queuing more Runnable jobs
            setStop(true);

            mLiveCard.unpublish();
            mLiveCard = null;
        }

        unregisterReceiver(broadCastReceiver);

        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    private RemoteViews getRemoteViews(int homeScore, int awayScore) {
        RemoteViews remoteViews = new RemoteViews(getPackageName(),
                R.layout.live_card);

        remoteViews.setTextViewText(R.id.home_team_name_text_view,
                getString(R.string.home_team));
        remoteViews.setTextViewText(R.id.away_team_name_text_view,
                getString(R.string.away_team));
        remoteViews.setTextViewText(R.id.footer_text,
                getString(R.string.game_quarter));

        remoteViews.setTextViewText(R.id.home_score_text_view,
                String.valueOf(homeScore));
        remoteViews.setTextViewText(R.id.away_score_text_view,
                String.valueOf(awayScore));
        return remoteViews;
    }

    public boolean isStopped() {
        return mIsStopped;
    }

    public void setStop(boolean isStopped) {
        mIsStopped = isStopped;
    }
}
</code></pre>
<h3 id="android"><a class="header" href="#android">Android</a></h3>
<p>The following Android sensors are supported on Glass:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ACCELEROMETER"><code>TYPE_ACCELEROMETER</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_GRAVITY"><code>TYPE_GRAVITY</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_GYROSCOPE"><code>TYPE_GYROSCOPE</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_LIGHT"><code>TYPE_LIGHT</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_LINEAR_ACCELERATION"><code>TYPE_LINEAR_ACCELERATION</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_MAGNETIC_FIELD"><code>TYPE_MAGNETIC_FIELD</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ORIENTATION"><code>TYPE_ORIENTATION</code></a> (deprecated)</li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ROTATION_VECTOR"><code>TYPE_ROTATION_VECTOR</code></a></li>
</ul>
<p>The following Android sensors are not supported:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_AMBIENT_TEMPERATURE"><code>TYPE_AMBIENT_TEMPERATURE</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_PRESSURE"><code>TYPE_PRESSURE</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_PROXIMITY"><code>TYPE_PROXIMITY</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_RELATIVE_HUMIDITY"><code>TYPE_RELATIVE_HUMIDITY</code></a></li>
<li><a href="http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_TEMPERATURE"><code>TYPE_TEMPERATURE</code></a></li>
</ul>
<blockquote>
<p><strong>Note</strong>: The Glass platform is based on Android 4.4 (API Level 19), but does not support the sensor features of that platform level or Android 4.3 (API Level 18). API features for sensors is frozen at Android 4.2 (API Level 17) for the aforementioned sensors that are supported.</p>
</blockquote>
<p>Here are some tips when using sensors on Glass:</p>
<ul>
<li>The Glass sensor coordinate system is shown below relative to the Glass display. For more information, see <a href="http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-coords">sensor coordinate system</a>.</li>
</ul>
<p><img src="./static/sensor-coord.png" alt="" /></p>
<ul>
<li>The accelerometer, gyroscope, and magnetometer are located on the optics pod of the Glass device, which users rotate to align the device with their sight. You cannot measure the angle of the optics pod directly, so be aware of this when using angles from these sensors for applications such as compass heading.</li>
<li>To preserve battery life, only listen to sensors when you need them. For example, if your Glassware uses a <a href="http://developer.android.com/reference/android/app/Service.html"><code>Service</code></a> to render a <a href="https://developers.google.com/glass/develop/gdk/reference/com/google/android/glass/timeline/LiveCard"><code>LiveCard</code></a> [<strong>TODO</strong>: ADD LINK] and you only need the sensors when the live card is visible, use the <a href="https://developers.google.com/glass/develop/gdk/reference/com/google/android/glass/timeline/LiveCard"><code>LiveCard</code></a> [<strong>TODO</strong>: ADD LINK] surface callback methods to start and stop listening to the sensors.</li>
<li>Sensor event callbacks run on the UI thread, so process events and return as quickly as possible. Consider pushing sensor events into a queue and using a background thread to handle them if your processing takes too long.</li>
<li>50 Hz is often a sufficient sampling rate for tracking head motion.</li>
</ul>
<p>For more information on how to use sensors, see the <a href="http://developer.android.com/guide/topics/sensors/sensors_overview.html">Android developer guide</a>.</p>
<hr />
<p>Portions of this page are reproduced from work created and <a href="https://developers.google.com/readme/policies">shared by Google</a> and used according to terms described in the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons 4.0 Attribution License</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../archive/glass/develop/gdk/touch.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../../archive/glass/develop/gdk/camera.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../archive/glass/develop/gdk/touch.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../../archive/glass/develop/gdk/camera.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../elasticlunr.min.js"></script>
        <script src="../../../../mark.min.js"></script>
        <script src="../../../../searcher.js"></script>

        <script src="../../../../clipboard.min.js"></script>
        <script src="../../../../highlight.js"></script>
        <script src="../../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
